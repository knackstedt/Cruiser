<h1>
    Pipeline Groups
</h1>

<div #scroller (scroll)="onScroll(scroller)" cdkDropListGroup style="height: 100%; overflow: auto">
    <!-- NgFor swimlane -->
    <mat-accordion displayMode="flat" [multi]="true" *ngFor="let group of pipelineGroups">
        <mat-expansion-panel expanded="true">
            <mat-expansion-panel-header>
                <div class="label">
                    {{group.label}}
                </div>
            </mat-expansion-panel-header>

            <div
                style="display: flex; flex-direction: column; gap: 6px"
                cdkDropList
                [cdkDropListData]="group.items"
                (cdkDropListDropped)="drop($event)"
                [cdkDropListSortingDisabled]="true"
                (pointerenter)="btn['_hover'] = true"
                (pointerleave)="btn['_hover'] = false"
            >
                <button
                    #btn
                    mat-icon-button
                    matTooltip="Create new pipeline"
                    class="add-button"
                    [style.opacity]="btn['_hover'] ? 1 : 0"
                    (click)="createPipeline({group: group.label})"
                >
                    <mat-icon>add</mat-icon>
                </button>

                <div cdkDrag *ngFor="let data of group.items">
                    <div class="placeholder" *cdkDragPlaceholder></div>
                    <div>
                        <!-- <mat-icon [fontIcon]="data._icon || 'task'"></mat-icon> -->
                        <span>{{data.name}}</span>

                    </div>
                </div>
                <div *ngIf="!group.items || group.items.length == 0" class="empty-placeholder">
                    <span>
                        No Pipelines
                    </span>
                </div>
            </div>
        </mat-expansion-panel>
    </mat-accordion>
</div>
